getwd()
devtools::document()
devtools::document()
devtools::document()
?grepl
devtools::document()
devtools::check(document = T)
devtools::check(document = T)
devtools::check(document = T)
devtools::check(document = T)
devtools::check(document = T)
install.packages("usethis")
install.packages("readr")
library(bbanalyze)
list_rate_card
df <- list_rate_card
View(df)
getwd()
## code to prepare `DATASET` dataset goes here
readr::read_csv(file.path(".","data-raw","sched-by-asset-type.csv"))
## code to prepare `DATASET` dataset goes here
rc_by_asset = readr::read_csv(file.path(".","data-raw","sched-by-asset-type.csv"))
?gather
?dplyr::gather
rc_by_asset %>% tidyr::gather(key = "Asset.Type", value = "List.Price",-band,-dl_cat)
## code to prepare `DATASET` dataset goes here
require(magrittr)
rc_by_asset = readr::read_csv(file.path(".","data-raw","sched-by-asset-type.csv"))
rc_by_asset %>% tidyr::gather(key = "Asset.Type", value = "List.Price",-band,-dl_cat)
rc_by_asset %>% tidyr::gather(key = "Asset.Type", value = "List.Price",-Band,-dl_cat)
## code to prepare `DATASET` dataset goes here
require(magrittr)
rc_by_asset = readr::read_csv(file.path(".","data-raw","sched-by-asset-type.csv"))
rc_by_asset %>% tidyr::gather(key = "Asset.Type", value = "List.Price",-Band,-dl_cat)
rc_by_asset %>% tidyr::gather(key = "Asset.Type", value = "List.Price",-Band,-Data.Category)
rc_by_asset %<>% tidyr::gather(key = "Asset.Type", value = "List.Price",-Band,-Data.Category)
rc_by_asset %<>% dplyr::mutate(Request.Type = "Unique", Fee.Type = "SCHEDULED")
rc_by_dl = readr::read_csv(file.path(".","data-raw","sched-by-dl.csv"))
rc_by_dl %<>% tidyr::gather(key = "Data.Category", value = "List.Price",-Band)
rc_by_asset %<>% dplyr::mutate(Request.Type = "Unique",
Fee.Type = "SCHEDULED",
Asset.Type = "unknown")
rc_by_asset = readr::read_csv(file.path(".","data-raw","sched-by-asset-type.csv"))
rc_by_asset %<>% tidyr::gather(key = "Asset.Type", value = "List.Price",-Band,-Data.Category)
rc_by_asset %<>% dplyr::mutate(Request.Type = "Unique", Fee.Type = "SCHEDULED")
rc_by_dl = readr::read_csv(file.path(".","data-raw","sched-by-dl.csv"))
rc_by_dl %<>% tidyr::gather(key = "Data.Category", value = "List.Price",-Band)
rc_by_dl %<>% dplyr::mutate(Request.Type = "Unique",
Fee.Type = "SCHEDULED",
Asset.Type = "unknown")
rc = rbind(rc_by_asset, rc_by_dl)
View(rc)
rc$Band = gsub("25-Jan","1-25",rc$Band)
df = list_rate_card %>% select(Fee.Type == "SCHEDULED")
df = list_rate_card %>% dplyr::select(Fee.Type == "SCHEDULED")
df = list_rate_card %>% dplyr::select(list_rate_card$Fee.Type == "SCHEDULED")
list_rate_card$Fee.Type
list_rate_card %>% dplyr::select(list_rate_card$Fee.Type == "SCHEDULED")
df = list_rate_card %>% dplyr::filter(Fee.Type == "SCHEDULED")
View(df)
df = list_rate_card %>% dplyr::filter(Fee.Type == "SCHEDULED" & Request.Type == "Unique")
View(df)
i = 1
df[i,]
rc %>% filter(List.Price == df[i,"List.Price"])
df[i,"List.Price"]
rc %>% dplyr::filter(List.Price == df[i,"List.Price"])
print(df[i,])
i = 2
print(df[i,])
rc %>% dplyr::filter(List.Price == df[i,"List.Price"])
i = 3
print(df[i,])
rc %>% dplyr::filter(List.Price == df[i,"List.Price"])
i = 4
print(df[i,])
rc %>% dplyr::filter(List.Price == df[i,"List.Price"])
i = 5
print(df[i,])
rc %>% dplyr::filter(List.Price == df[i,"List.Price"])
i = 6
print(df[i,])
for (i in 1:nrow(df)) {
print(df[i,])
print(rc %>% dplyr::filter(List.Price == df[i,"List.Price"]))
}
rc_by_asset = readr::read_csv(file.path(".","data-raw","sched-by-asset-type.csv"))
rc_by_asset %<>% tidyr::gather(key = "Asset.Type", value = "List.Price",-Band,-Data.Category)
rc_by_asset %<>% dplyr::mutate(Request.Type = "Unique", Fee.Type = "SCHEDULED")
rc_by_dl = readr::read_csv(file.path(".","data-raw","sched-by-dl.csv"))
rc_by_dl %<>% tidyr::gather(key = "Data.Category", value = "List.Price",-Band)
rc_by_dl %<>% dplyr::mutate(Request.Type = "Unique",
Fee.Type = "SCHEDULED",
Asset.Type = "unknown")
rc = rbind(rc_by_asset, rc_by_dl)
rc$Band = gsub("25-Jan","1-25",rc$Band)
df = list_rate_card %>% dplyr::filter(Fee.Type == "SCHEDULED" & Request.Type == "Unique")
i = 1
for (i in 1:nrow(df)) {
print(df[i,])
print(rc %>% dplyr::filter(List.Price == df[i,"List.Price"]))
}
df = readr::read_csv(file.path(".","data-raw","ad-hoc-rc.csv"))
df = readr::read_csv(file.path(".","data-raw","ad-hoc-rc.csv"))
df %<>% tidyr::gather(key = "Data.Category", value = "List.Price",-Asset.Type)
list_rate_card
df %<>% dplyr::mutate(Request.Type = "Unique", Fee.Type = "AD-HOC", Band = NA)
rc = rbind(rc,df)
View(rc)
rc %<>% dplyr::filter(!is.na(List.Price))
?usethis::use_data
pub_rate_card = rc
usethis::use_data(pub_rate_card)
install.packages("knitr")
install.packages("rmarkdown")
install.packages(testthat)
install.packages("testthat")
library(devtools)
install.packages("devtools")
devtools::document()
library(devtools)
devtools::document()
devtools::load_all()
library(bbanalyze)
filepath <- system.file("extdata", "usage_detail_30225811_201811", package = "bbanalyze")
system.file("extdata", "usage_detail_30225811_201811", package = "bbanalyze") %>% parse_detail()
system.file("extdata", "usage_detail_30225811_201811", package = "bbanalyze") %>% parse_detail() %>% cluster_times()
pub_rate_card
devtools::check(document = T)
### code to prepare `pub_rate_card` dataset goes here
require(magrittr)
require(usethis)
dl_cats = readr::read_csv(file.path(".","data-raw","fields.csv"))
dl_cats = readr::read_csv(file.path(".","data-raw","fields.csv"), col_types = cols(.default = "c"))
dl_cats = readr::read_csv(file.path(".","data-raw","fields.csv"), col_types = readr::cols(.default = "c"))
View(dl_cats)
c(colnames(dl_cats)[2:length(colnames(dl_cats))],"extra")
# colnames(dl_cats) = c(colnames(dl_cats)[2:length(colnames(dl_cats))],"extra")
usethis::use_data(dl_cats)
dl_products = read.csv(file.path(".","data-raw","fields.csv"))
bbg_mapping = readLines(file.path(".","data-raw","fields.csv"))
dl_products = read.csv(file.path(".","data-raw","DLContentSets.csv"))
bbg_mapping = readLines(file.path(".","data-raw","BbgMapping.conf"))
dl_products = read.csv(file.path(".","data-raw","DLContentSets.csv"))
bbg_mapping = readLines(file.path(".","data-raw","BbgMapping.conf"))
sort(unique(dl_products$ModuleLevel2))
usethis::use_data(dl_products)
usethis::use_data(bbg_mapping)
# ?read.csv
asset_class_mapping = read.csv(file.path(".","data-raw","vr_asset_class_mapping.csv"), stringsAsFactors = F)
head(asset_class_mapping)
usethis::use_data(asset_class_mapping)
product_mapping = read.csv(file.path(".","data-raw","vr_product_dl_cat_mapping.csv"), stringsAsFactors = F)
head(product_mapping)
usethis::use_data(product_mapping)
devtools::check(document = T)
devtools::check(document = T)
devtools::check(document = T)
devtools::check(document = T)
devtools::check(document = T)
devtools::check(document = T)
